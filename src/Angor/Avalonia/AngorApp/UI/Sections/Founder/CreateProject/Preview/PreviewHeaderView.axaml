<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:preview="clr-namespace:AngorApp.UI.Sections.Founder.CreateProject.Preview"
             mc:Ignorable="d" d:DesignWidth="700" d:DesignHeight="500"
             x:Class="AngorApp.UI.Sections.Founder.CreateProject.Preview.PreviewHeaderView"
             x:DataType="preview:PreviewHeaderViewModel" Container.Name="Root" Container.Sizing="Width">
    
    <UserControl.Styles>
        <ContainerQuery Name="Root" Query="min-width:800">
            <Style Selector="EnhancedButton#PreviewButton">
                <Setter Property="IsVisible" Value="False" />
            </Style>
        </ContainerQuery>
    </UserControl.Styles>
    
    <EnhancedButton Margin="5" Padding="10 5" x:Name="PreviewButton" FontSize="13" FontWeight="Regular" Content="Show Preview"
            HorizontalAlignment="Center">
        <Button.Flyout>
            <Flyout>
                <Flyout.FlyoutPresenterTheme>
                    <ControlTheme TargetType="FlyoutPresenter"
                                  BasedOn="{StaticResource {x:Type FlyoutPresenter}}">
                        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
                        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled" />
                    </ControlTheme>
                </Flyout.FlyoutPresenterTheme>
                <DockPanel>
                    <Panel DockPanel.Dock="Top" Margin="0 0 0 10">
                        <StackPanel HorizontalAlignment="Left" Classes="SmallGap" Orientation="Horizontal">
                            <ContentControl Margin="5 0 0 0" VerticalAlignment="Center">
                                <Icon Source="fa-eye" />
                            </ContentControl>
                            <TextBlock FontSize="{StaticResource FontSizeNormal}" VerticalAlignment="Center">Preview</TextBlock>
                        </StackPanel>
                        <EnhancedButton x:Name="HideButton" Icon="{Icon fa-xmark}" HorizontalAlignment="Right" VerticalAlignment="Top" />
                    </Panel>
                    <ScrollViewer>
                        <preview:PreviewView DataContext="{Binding CreateProject}" />
                    </ScrollViewer>
                </DockPanel>
            </Flyout>
        </Button.Flyout>

        <Interaction.Behaviors>
            <EventTriggerBehavior EventName="Click" SourceObject="HideButton">
                <HideFlyoutAction TargetControl="PreviewButton" Flyout="{Binding #PreviewButton.Flyout}" />
            </EventTriggerBehavior>
        </Interaction.Behaviors>
    </EnhancedButton>
</UserControl>