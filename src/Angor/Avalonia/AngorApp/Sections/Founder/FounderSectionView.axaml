<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:i="https://github.com/projektanker/icons.avalonia"
             mc:Ignorable="d" d:DesignWidth="700" d:DesignHeight="1000"
             x:Class="AngorApp.Sections.Founder.FounderSectionView"
             xmlns:founder="clr-namespace:AngorApp.Sections.Founder"
             xmlns:co="clr-namespace:AngorApp.UI.Controls"
             xmlns:z="clr-namespace:Zafiro.Avalonia.Controls;assembly=Zafiro.Avalonia"
             xmlns:av="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
             xmlns:ui="clr-namespace:Zafiro.UI;assembly=Zafiro.UI"
             x:DataType="founder:IFounderSectionViewModel">

    <Design.DataContext>
        <founder:FounderSectionViewModelDesign />
    </Design.DataContext>

    <UserControl.DataTemplates>

        <DataTemplate DataType="founder:IFounderProjectViewModel">
            <Button Classes="CardGridItem" Command="{Binding GoToDetails}">
                <OverlayBorder Padding="0" Theme="{StaticResource CardOverlayBorder}">
                    <Grid RowDefinitions="180 Auto Auto *">
                        <Panel>
                            <av:AdvancedImage Stretch="UniformToFill" Source="{Binding Picture}" />
                            <Panel VerticalAlignment="Bottom" HorizontalAlignment="Left">
                                <av:AdvancedImage Width="80" CornerRadius="40" Stretch="UniformToFill"
                                                  Margin="10" Height="80" Source="{Binding Banner}" />
                                <Border CornerRadius="40" Width="80" Height="80" BorderBrush="White" BorderThickness="4" />
                            </Panel>
                        </Panel>
                        <StackPanel Spacing="10" Grid.Row="1" Margin="15">
                            <TextBlock Classes="SizeBig" TextAlignment="Center" TextWrapping="Wrap" Grid.Row="1" Text="{Binding Name}" />
                            <TextBlock ToolTip.Tip="{Binding $self.Text}" TextTrimming="CharacterEllipsis" TextAlignment="Center" TextWrapping="Wrap" MaxLines="4" Grid.Row="2" Text="{Binding ShortDescription}" />
                        </StackPanel>
                    </Grid>
                </OverlayBorder>
            </Button>
        </DataTemplate>
    </UserControl.DataTemplates>

    <co:PageContainer>
        <ScrollViewer>
            <DockPanel VerticalSpacing="20">
                <z:Card Theme="{StaticResource WideCard}" Header="Founder" DockPanel.Dock="Top">
                    <z:Card.HeaderEndContent>
                        <FlexBox Gap="10">
                            <IconButton Command="{Binding LoadProjects}">
                                Refresh
                                <IconButton.Icon>
                                    <ui:Icon Source="fa-arrows-rotate" />
                                </IconButton.Icon>
                            </IconButton>
                            <ReactiveIconButton Command="{Binding Create}">
                                New Project
                                <ReactiveIconButton.Icon>
                                    <ui:Icon Source="fa-plus" />
                                </ReactiveIconButton.Icon>
                            </ReactiveIconButton>
                        </FlexBox>
                    </z:Card.HeaderEndContent>
                    <z:Card.HeaderStartContent>
                        <i:Icon FontSize="40" Value="mdi-shield-account-outline" />
                    </z:Card.HeaderStartContent>
                </z:Card>
                <z:Loading LoadingText="Loading projects. Please wait." IsLoading="{Binding LoadProjects.IsExecuting^}">
                    <CardGrid MinColumnWidth="300"
                              Empty.Content="Nothing to show"
                              Classes="ShowEmptyContent" ItemsSource="{Binding ProjectsList}" />
                </z:Loading>
            </DockPanel>
        </ScrollViewer>
    </co:PageContainer>
</UserControl>