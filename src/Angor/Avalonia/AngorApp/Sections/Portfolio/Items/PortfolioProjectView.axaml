<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:p="clr-namespace:AngorApp.Sections.Portfolio"
             xmlns:design="clr-namespace:AngorApp.Design"
             xmlns:av="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
             xmlns:items="clr-namespace:AngorApp.Sections.Portfolio.Items"
             xmlns:c="clr-namespace:System.Collections;assembly=System.Runtime"
             xmlns:controls="clr-namespace:AngorApp.UI.Controls"
             mc:Ignorable="d"
             MinWidth="300"
             d:DesignWidth="700"
             x:Class="AngorApp.Sections.Portfolio.Items.PortfolioProjectView" x:DataType="p:IPortfolioProject">

    <Design.DataContext>
        <p:PortfolioProjectDesign InvestmentStatus="PendingFounderSignatures"
                                  IsInvestmentCompleted="False"
                                  Name="Project 1"
                                  LogoUri="https://test.angor.io/assets/img/no-image.jpg">
            <p:PortfolioProjectDesign.Target>
                <design:DesignTimeAmount Sats="12000000" />
            </p:PortfolioProjectDesign.Target>
            <p:PortfolioProjectDesign.Raised>
                <design:DesignTimeAmount Sats="4400000" />
            </p:PortfolioProjectDesign.Raised>
        </p:PortfolioProjectDesign>
    </Design.DataContext>

    <OverlayBorder Theme="{StaticResource CardOverlayBorder}">
        <StackPanel Classes="SmallGap">
            <FlexBox AlignItems="Center" JustifyContent="SpaceBetween" Gap="20" Wrap="Wrap">
                <av:AdvancedImage FlexBox.Grow="2" Height="150" Stretch="UniformToFill" CornerRadius="20" Source="{Binding LogoUri}" />
                <TextBlock FlexBox.Grow="1" Text="{Binding Name}" Classes="SizeBig"></TextBlock>
                <items:ProgressView FlexBox.Grow="2" />
            </FlexBox>
             <CardGrid DockPanel.Dock="Top">
                 <CardGrid.ItemsSource>
                     <c:ArrayList>
                         <OverlayBorder Theme="{StaticResource CardOverlayBorder}">
                             <UniformGrid Columns="1" VerticalAlignment="Top">
                                 <HeaderedContainer Theme="{StaticResource Inline}" Header="My Investment">
                                     <TextBlock Text="{Binding Invested.DecimalString}" />
                                 </HeaderedContainer>
                                 <HeaderedContainer Theme="{StaticResource Inline}" Header="Investment Status">
                                     <controls:Badge Tag="{Binding InvestmentStatus}">
                                         <controls:Badge.Styles>
                                             <Style Selector="controls|Badge[Tag=PendingFounderSignatures]">
                                                 <Setter Property="Color" Value="DarkOrange" />
                                                 <Setter Property="Content" Value="Pending" />
                                             </Style>
                                             <Style Selector="controls|Badge[Tag=FounderSignaturesReceived]">
                                                 <Setter Property="Color" Value="Goldenrod" />
                                                 <Setter Property="Content" Value="Approved" />
                                             </Style>
                                             <Style Selector="controls|Badge[Tag=Invested]">
                                                 <Setter Property="Color" Value="LimeGreen" />
                                                 <Setter Property="Content" Value="Invested" />
                                             </Style>
                                             <Style Selector="controls|Badge[Tag=Invalid]">
                                                 <Setter Property="Color" Value="Red" />
                                                 <Setter Property="Content" Value="INVALID!" />
                                             </Style>
                                         </controls:Badge.Styles>
                                     </controls:Badge>
                                 </HeaderedContainer>
                             </UniformGrid>
                         </OverlayBorder>
                         <OverlayBorder Theme="{StaticResource CardOverlayBorder}">
                             <UniformGrid Columns="1" VerticalAlignment="Top">
                                 <HeaderedContainer Theme="{StaticResource Inline}" Header="In Recovery">
                                     <TextBlock Text="{Binding InRecovery.DecimalString}" />
                                 </HeaderedContainer>
                                 <HeaderedContainer Theme="{StaticResource Inline}" Header="Recovery Status">
                                     <TextBlock Text="None" />
                                 </HeaderedContainer>
                             </UniformGrid>
                         </OverlayBorder>
                     </c:ArrayList>
                 </CardGrid.ItemsSource>
             </CardGrid>
        </StackPanel>
    </OverlayBorder>

    <!-- <Card Header="{Binding }" HeaderPadding="10" Padding="20" -->
    <!--       HeaderStartContent="{Binding LogoUri}"> -->
    <!--     <Card.HeaderStartContentTemplate> -->
    <!--         <DataTemplate DataType="x:Uri"> -->
    <!--             <av:AdvancedImage Width="150" Height="150" Stretch="UniformToFill" CornerRadius="20" Source="{Binding }" /> -->
    <!--         </DataTemplate> -->
    <!--     </Card.HeaderStartContentTemplate> -->
    <!--     <Card.HeaderTemplate> -->
    <!--         <DataTemplate DataType="p:IPortfolioProject"> -->
    <!--             <DockPanel Margin="10"> -->
    <!--                 <TextBlock DockPanel.Dock="Top" Classes="SizeBig" TextWrapping="Wrap" Text="{Binding Name}" /> -->
    <!--                 <items:ProgressView /> -->
    <!--             </DockPanel> -->
    <!--         </DataTemplate> -->
    <!--     </Card.HeaderTemplate> -->
    <!--     <StackPanel Classes="SmallGap"> -->
    <!--         <items:OfferAcceptedView> -->
    <!--             <items:OfferAcceptedView.IsVisible> -->
    <!--                 <MultiBinding Converter="{x:Static BoolConverters.Or}"> -->
    <!--                     <Binding Path="CompleteInvestment.CanExecute^" /> -->
    <!--                     <Binding Path="CompleteInvestment.IsExecuting^" /> -->
    <!--                 </MultiBinding> -->
    <!--             </items:OfferAcceptedView.IsVisible> -->
    <!--         </items:OfferAcceptedView> -->
    <!--         <CardGrid DockPanel.Dock="Top"> -->
    <!--             <CardGrid.ItemsSource> -->
    <!--                 <collections:ArrayList> -->
    <!--                     <OverlayBorder Theme="{StaticResource CardOverlayBorder}"> -->
    <!--                         <UniformGrid Columns="1" VerticalAlignment="Top"> -->
    <!--                             <HeaderedContainer Theme="{StaticResource Inline}" Header="My Investment"> -->
    <!--                                 <TextBlock Text="{Binding Invested.DecimalString}" /> -->
    <!--                             </HeaderedContainer> -->
    <!--                             <HeaderedContainer Theme="{StaticResource Inline}" Header="Investment Status"> -->
    <!--                                 <c:Badge Tag="{Binding InvestmentStatus}"> -->
    <!--                                     <c:Badge.Styles> -->
    <!--                                         <Style Selector="c|Badge[Tag=PendingFounderSignatures]"> -->
    <!--                                             <Setter Property="Color" Value="DarkOrange" /> -->
    <!--                                             <Setter Property="Content" Value="Pending" /> -->
    <!--                                         </Style> -->
    <!--                                         <Style Selector="c|Badge[Tag=FounderSignaturesReceived]"> -->
    <!--                                             <Setter Property="Color" Value="Goldenrod" /> -->
    <!--                                             <Setter Property="Content" Value="Approved" /> -->
    <!--                                         </Style> -->
    <!--                                         <Style Selector="c|Badge[Tag=Invested]"> -->
    <!--                                             <Setter Property="Color" Value="LimeGreen" /> -->
    <!--                                             <Setter Property="Content" Value="Invested" /> -->
    <!--                                         </Style> -->
    <!--                                         <Style Selector="c|Badge[Tag=Invalid]"> -->
    <!--                                             <Setter Property="Color" Value="Red" /> -->
    <!--                                             <Setter Property="Content" Value="INVALID!" /> -->
    <!--                                         </Style> -->
    <!--                                     </c:Badge.Styles> -->
    <!--                                 </c:Badge> -->
    <!--                             </HeaderedContainer> -->
    <!--                         </UniformGrid> -->
    <!--                     </OverlayBorder> -->
    <!--                     <OverlayBorder Theme="{StaticResource CardOverlayBorder}"> -->
    <!--                         <UniformGrid Columns="1" VerticalAlignment="Top"> -->
    <!--                             <HeaderedContainer Theme="{StaticResource Inline}" Header="In Recovery"> -->
    <!--                                 <TextBlock Text="{Binding InRecovery.DecimalString}" /> -->
    <!--                             </HeaderedContainer> -->
    <!--                             <HeaderedContainer Theme="{StaticResource Inline}" Header="Recovery Status"> -->
    <!--                                 <TextBlock Text="None" /> -->
    <!--                             </HeaderedContainer> -->
    <!--                         </UniformGrid> -->
    <!--                     </OverlayBorder> -->
    <!--                 </collections:ArrayList> -->
    <!--             </CardGrid.ItemsSource> -->
    <!--         </CardGrid> -->
    <!-- -->
    <!--     </StackPanel> -->
    <!-- </Card> -->

</UserControl>